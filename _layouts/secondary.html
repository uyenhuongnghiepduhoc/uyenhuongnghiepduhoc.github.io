<!DOCTYPE html>
<html lang="en">
<head>
  {% include head.html %}
</head>
<body>
  <!-- translucent white overlay centered over the background image -->
  <div class="overlay">
    <!-- Landscape-left gray panel with nav (hidden on portrait) -->
    <nav class="side-nav" aria-label="Site navigation">
      <ul>
        <li><a href="{{ '/' | relative_url }}" class="{% if page.url == '/' or page.url == '' or page.url == '/index.html' %}current{% endif %}">Home</a></li>
        <li><a href="./about.html">About</a></li>
        <li><a href="./blog.html">Blog</a></li>
      </ul>
    </nav>

    <!-- Menu button for portrait screens (hidden in landscape) -->
    <div class="menu-wrapper">
      <button id="menuToggle" class="menu-button" aria-expanded="false" aria-controls="menuDropdown">Menu â–¾</button>
      <div id="menuDropdown" class="menu-dropdown" hidden>
        <a href="{{ '/' | relative_url }}" class="{% if page.url == '/' or page.url == '' or page.url == '/index.html' %}current{% endif %}">Home</a>
        <a href="./about.html">About</a>
        <a href="./blog.html">Blog</a>
      </div>
    </div>

    <!-- page content area (to the right of the side-nav in landscape,
         full width inside the overlay on portrait) -->
    <main class="page-content" role="main">
      {{ content }}
    </main>
  </div>

  <script>
    // small toggle for portrait menu
    (function(){
      var btn = document.getElementById('menuToggle');
      var menu = document.getElementById('menuDropdown');
      if (!btn || !menu) return;
      btn.addEventListener('click', function() {
        var opened = menu.getAttribute('hidden') === null ? false : true;
        if (opened) {
          menu.removeAttribute('hidden');
          btn.setAttribute('aria-expanded','true');
        } else {
          menu.setAttribute('hidden','');
          btn.setAttribute('aria-expanded','false');
        }
      });
      // close when clicking outside
      document.addEventListener('click', function(e){
        if (!btn.contains(e.target) && !menu.contains(e.target)) {
          menu.setAttribute('hidden','');
          btn.setAttribute('aria-expanded','false');
        }
      });
    })();
  </script>
</body>
</html>
